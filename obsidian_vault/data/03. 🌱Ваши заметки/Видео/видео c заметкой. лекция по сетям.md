---
share: true
date: 2022-01-01
tags:
  - note
  - nsk
  - video/lecture
project: "[[DO2_Linux Network]]"
s21-authors: 
branch: "[[DevOPS|DevOPS]]"
source: https://21-school-by-students.notion.site/b1c20aedae3a496f8bd80f4062ad4525
---

[Магия SSH / Хабр](https://habr.com/ru/articles/331348/)

https://youtu.be/PJw7VshvFSg
![Лекция по сетям - YouTube](https://youtu.be/PJw7VshvFSg)

## Адресация в IP сетях
### MAC адрес

MAC адрес - уникальный идентификатор, присваиваемый каждой единице активного оборудования или некоторым их интерфейсам в компьютерных сетях Ethernet. Этот адрес устанавливается заводом-изготовителем сетевого оборудования. Благодаря ему происходит первичная идентификация хоста в сети. Стандарты IEEE определяют 48-разрядный (6 октетов) MAC-адрес, который разделён на четыре части.  
Пример MAC-адреса: 00:26:57:00:1f:02

### IP адрес

IP адрес - это адрес, используемый узлом на сетевом уровне. Он имеет иерархическую структуру. Состоит IP адрес из 4-х чисел, называемых октетами и разделённых между собой точками. Каждое такое число (октет) может принимать значение от 0 до 255. Длина каждого октета равна 8 битам, а суммарная длина IPv4 = 32 битам.

Например обычный домашний или smb роутер может выдать вам адрес 192.168.1.10

Ip адрес состоит из двух частей - адреса подсети и адреса узла (хоста, компьютера, устройства) этой подсети. Для обозначения этой границы используется маска подсети.

### Маска подсети

Если в IP-адресе 0 и 1 чередуются, то в маске сначала идут 1, а потом 0. Эти биты фиксируют адрес сети и задают размер.

Например в сетях класса С, предназначенных для мелких сетей - домашних и для мелкого бизнеса чаще всего используется маска 255.255.255.0 в двоичной записи она выглядит как 11111111.11111111.11111111.00000000

Теперь вернемся к нашему адресу - 192.168.1.10 При такой маске подсети он будет делиться на "192.168.1.0" - адрес подсети и "10" - адрес хоста

Маска подсети 255.255.255.0 может содержать 254 хоста.  
Откуда берется 254? 254 = 2^8 - 2  
8 - количество нулей в маске  
2 адреса всегда резервируются для адреса подсети и широковещания

В крупных предприятиях используются подсети класса B - с маской 255.255.0.0 в которой может быть до 2^16-2 = 65534 хоста  
Тут тоже довольно легко посчитать что при адресе 10.10.0.1 адрес подсети будет "10.10.0.0", а адрес хоста будет "0.1"

### Примеры

А теперь давайте посчитаем оптимальную подсеть для Новосибирского кампуса Школы 21. У нас 500 маков для пиров, несколько у адм, плюс еще нужны резервные адреса, поэтому использовать подсеть на 510 хостов будет совсем впритык, будем считать на 1022. Берем соответственно маску на 10 нулей - 11111111.11111111.11111100.00000000  
переведем ее в десятичный вид:  
255.255.252.0  
теперь попробуем посчитать диапазоны адресов, которые мы получили.

Для подсети 192.168.0.0

имеем диапазон адресов для хостов 192.168.0.1 - 192.168.3.254  
адрес широковещания 192.168.3.255

Теперь посчитаем маленькие сети - например для 7 адресов:

ближайшее к 7 степень двойки - 3, но для подсети 255.255.255.248 доступно всего 6 адресов (не забываем про широковещание и адрес сети). Тогда берем следующую по размеру маску 255.255.240, кстати существует и короткий способ записи маски подсети - по количеству единиц. т.е. эту же маску можно записать /28

![](https://telegra.ph/file/1c06e6cd47dcb88d64e99.png)

Возможные маски подсети

Расчитаем диапазоны для этой маски:  
192.168.0.1 - 192.168.0.14 (192.168.0.0 - адрес маски, 192.168.0.15 - адрес широковещания)

следующий диапазон уже будет:  
192.168.0.17 - 192.168.0.30 (192.168.0.16 - адрес маски, 192.168.0.17 - адрес широковещания)

Нельзя начинать диапазон откуда попало - необходимо четко придеживаться порядка. Чтобы не путаться, что достаточно легко на маленьких подсетях, можно проверять себя при помощи [онлайн ip калькуляторов](https://ipcalc.co/).

как выглядит ip адрес и маска в двоичном виде:

192.168.0.10 - 11000000.10101000.00000000.00001010  
255.255.255.0 - 11111111.11111111.11111111.00000000

Для выхода за пределы своей подсети необходим роутер (маршрутизатор).

Если хост 192.168.0.10/24 обращается по адресу 192.168.21.21 пакет направляется на адрес маршрутизатора (если такой прописан в сетевых настройках подключения)

Если хост 192.168.0.10/24 обращается по адресу 21-school.ru для начала надо получить ip адрес этого хоста - запрос отправляется на DNS сервер, этот сервер хранит соответсвия буквенных адресов и ip адресов серверов. DNS сервер отвечает хосту, что адресу соответствует ip 195.133.239.91 - он тоже не находится в нашей подсети, соответственно пакет тоже направляется на адрес маршрутизатора.

### DHCP

Dynamic Host Configuration Protocol — протокол динамической настройки узла. Сервер DHCP по заданным правилам выдает хостам сетевые настройки, такие как ip адрес, адрес маршрутизатора, DNS сервер.

### Ping

Простейшая утилита проверки работы сети. Отправляет запрос по указанному адресу используя протокол ICMP, удаленный хост, получая запрос - отправляет ответ. В консоль выводится время, которое ушло на процесс обмена.